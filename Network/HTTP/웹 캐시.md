# 웹 캐시(Web Caches)

모든 사용자 요청이 웹 서버를 반드시 거쳐야 한다면, 웹 서버는 과부하에 시달리게 되고 성능이 저하될 것입니다.  
이러한 성능 저하를 방지하기 위해 웹에서는 정보를 캐싱하는 방법을 사용하며, 이때 프록시 서버가 활용됩니다.

## 프록시 서버란?

프록시 서버는 클라이언트와 웹 서버 간의 중개 역할을 하는 서버로, 클라이언트의 요청을 대신 처리하고 응답을 반환합니다.  
프록시 서버는 요청된 콘텐츠를 캐시하여, 동일한 요청이 있을 경우 웹 서버에 직접 접근하지 않고도 빠르게 응답할 수 있습니다.  
이를 통해 웹 트래픽을 줄이고, 서버의 부하를 경감하는 효과를 가져옵니다.

## 프록시 서버의 캐싱

프록시 서버는 클라이언트의 요청에 대한 응답을 캐시하여 저장합니다.  
이후 동일한 요청이 들어오면 캐시된 데이터를 반환함으로써, 원래 서버에 대한 요청을 최소화합니다.  
이 과정에서 캐시된 데이터의 유효성을 유지하기 위해 적절한 캐시 정책을 설정해야 합니다.  
캐시는 일반적으로 다음과 같은 정보를 포함합니다:

- **URL**: 요청된 리소스의 주소
- **응답 본문**: 요청에 대한 서버의 응답 데이터
- **헤더**: 캐시 유효 기간, 만료 시간 등의 메타데이터

## 활용해야 하는 이유

1. **응답 속도 향상**:  
   캐시된 데이터를 사용함으로써 사용자 요청에 대한 응답 속도가 크게 향상됩니다.
2. **트래픽 감소**:  
   프록시 서버는 원래 서버와의 직접적인 통신을 줄여, 기관의 액세스 링크에 대한 트래픽을 감소시킵니다.  
   이는 네트워크 대역폭을 절약하고, 서버의 부하를 줄이는 데 기여합니다.
3. **서버 부하 분산**:
   여러 클라이언트가 동일한 데이터를 요청할 때, 프록시 서버가 캐시된 데이터를 제공함으로써 원래 서버의 부하를 분산시킵니다.

## Conditional-GET

Conditional-GET은 클라이언트가 서버에 요청할 때, 특정 조건을 만족하는 경우에만 데이터를 가져오는 방식입니다.

### Conditional-GET의 과정

1. **클라이언트 요청**:  
   클라이언트가 프록시 서버에 리소스를 요청할 때, `If-Modified-Since` 또는 `If-None-Match` 헤더를 포함하여 요청합니다.  
   이 헤더는 클라이언트가 마지막으로 받은 리소스의 수정 시간이나 ETag(엔티티 태그)를 포함합니다.

2. **프록시 서버 캐시 확인**:  
   프록시 서버는 요청된 리소스가 캐시에 있는지 확인합니다.  
   만약 캐시에 해당 리소스가 존재하고, 수정된 시간이 클라이언트가 보낸 시간보다 이전이라면, 프록시 서버는 캐시된 데이터를 클라이언트에게 반환합니다.

3. **서버에 대한 요청**:  
   만약 캐시에 리소스가 없거나, 수정된 시간이 후라면, 프록시 서버는 원래 서버에 요청하여 최신 데이터를 가져옵니다.  
   서버는 해당 리소스가 수정되지 않았을 경우 `304 Not Modified` 상태 코드로 응답하며, 프록시 서버는 기존 캐시된 데이터를 클라이언트에게 전달합니다.

4. **최신 데이터 처리**:  
   만약 원래 서버가 수정된 리소스를 반환하면, 프록시 서버는 새로운 데이터를 캐시에 저장하고 클라이언트에게 전달합니다.

위 방법을 사용하면 캐시에 최신 버전이 존재하는 경우, 원래 서버에서 데이터를 받을 필요가 없으므로, 네트워크 트래픽과 서버 부하를 줄일 수 있습니다.
