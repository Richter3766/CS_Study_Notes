# 이메일(Email)

이메일은 현대 커뮤니케이션에서 중요한 역할을 하며, 주로 세 가지 주요 요소로 구성됩니다:

- **사용자 에이전트(User Agents)**
- **메일 서버(Mail Servers)**
- **SMTP(Simple Mail Transfer Protocol)**

### 사용자 에이전트 (User Agents)

사용자 에이전트는 이메일 클라이언트로, 이메일 메시지를 작성, 편집 및 읽는 데 사용됩니다.  
주요 기능은 다음과 같습니다:

- **작성 및 편집**:  
  사용자가 이메일 내용을 작성하고 수정할 수 있게 해줍니다.
- **읽기**:  
  수신된 이메일 메시지를 표시하고 읽을 수 있는 기능을 제공합니다.
- **메시지 저장**:  
  발신 및 수신된 메시지를 서버에 저장합니다. 클라이언트는 이를 통해 언제든지 이메일을 조회할 수 있습니다.

### 메일 서버 (Mail Servers)

메일 서버는 이메일을 수신하고 전송하는 역할을 합니다. 주요 구성 요소는 다음과 같습니다:

- **메일박스(Mailbox)**:  
  수신 이메일을 저장하는 공간으로, 사용자가 자신의 이메일을 확인할 때 접근하는 영역입니다.
- **메시지 큐(Message Queue)**:  
  발신 이메일을 저장하는 공간으로, 수신 서버로 전송될 때까지 대기하는 메시지를 보관합니다.
- **SMTP 프로토콜**:  
  이메일 전송을 관리하는 프로토콜로, 메일 서버 간의 메시지 전송을 담당합니다.

### 이메일: RFC 5321

RFC 5321은 이메일 전송을 위한 표준으로, SMTP 프로토콜을 정의합니다.  
주요 특징은 다음과 같습니다:

- **TCP 사용**:  
  SMTP는 신뢰성 있는 전송을 위해 TCP 프로토콜을 사용합니다.
- **직접 전송(Direct Transfer)**:  
  발신 서버에서 수신 서버로 직접 메시지를 전송합니다.
- **전송의 세 가지 단계**:

  1. **핸드쉐이킹(Handshaking)**:  
     서버 간의 인사 및 연결 설정.
  2. **메시지 전송(Transfer of Messages)**:  
     실제 이메일 메시지의 전송.
  3. **종료(Closure)**:  
     연결 종료 및 세션 정리.

- **명령어**:
  ASCII 텍스트로 이루어져 있으며, 클라이언트가 서버에 명령을 보냅니다.
- **응답**:  
  서버는 상태 코드와 문구를 포함한 응답을 반환합니다.
- **7비트 ASCII**:  
  전송되는 메시지는 반드시 7비트 ASCII 형식이어야 합니다.

### 이메일 전송 예시

1. 사용자가 이메일 클라이언트에서 새 메시지를 작성하고 수신자의 이메일 주소를 입력합니다.
2. 메시지를 전송하면 사용자 에이전트가 SMTP 서버에 연결하여 이메일을 전송합니다.
3. SMTP 서버는 메시지를 수신하고, 메시지 큐에 저장합니다.
4. SMTP 서버는 수신자 서버와의 연결을 설정하여 메시지를 전달합니다.
5. 수신자 서버는 이메일을 수신하여 해당 사용자의 메일박스에 저장합니다.
6. 수신자는 이메일 클라이언트를 통해 해당 메일박스에 접근하여 메시지를 읽습니다.

### SMTP와 HTTP

- **HTTP**:  
  클라이언트가 서버에서 데이터를 풀(Pull)하는 방식입니다.
- **SMTP**:  
  클라이언트가 서버에 데이터를 푸시(Push)하는 방식입니다.

- **ASCII 명령어 사용**:  
  SMTP와 HTTP 모두 ASCII 명령어를 사용합니다.

- **지속적인 연결(Persistent Connections)**:  
  SMTP는 여러 메시지를 전송하는 동안 연결을 유지할 수 있어 효율성을 높입니다.

### 메일 접근 프로토콜(Mail Access Protocols)

- **SMTP**:  
  이메일 전송을 위한 프로토콜입니다.
- **IMAP (Internet Message Access Protocol)**:  
   사용자가 서버에 저장된 이메일 메시지에 접근하고 관리할 수 있게 해주는 프로토콜입니다.  
  IMAP은 메일 서버에서 메시지를 직접 조작할 수 있어, 여러 기기에서 이메일을 동기화하는 데 유용합니다.
- **POP3 (Post Office Protocol version 3)**:  
  이메일을 서버에서 다운로드하여 로컬 장치에 저장하는 방식으로, 서버에서 메시지를 삭제할 수 있습니다.  
  이는 주로 단일 장치에서 이메일을 사용하는 경우에 적합합니다.
