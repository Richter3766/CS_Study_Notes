# 인터럽트(Interupt)

**인터럽트**는 CPU에게 신호를 보내어 특정 사건이나 요청이 발생했음을 알리는 방법입니다. 이를 통해 CPU는 현재 수행 중인 작업을 잠시 중단하고, 중요한 작업을 처리할 수 있습니다.

아래 디바이스 컨트롤러의 동작 예시는 인터럽트의 역할을 잘 보여줍니다.

### 디바이스 컨트롤러의 동작

1. I/O 동작 시작:  
   디바이스 드라이버(device driver)가 적절한 레지스터(register)에 접근하여 I/O 작업을 시작합니다.
2. 동작 분석:  
   디바이스 컨트롤러(device controller)가 레지스터의 내용을 읽어 수행해야 할 동작을 분석합니다.
3. 데이터 전송:  
   컨트롤러가 디바이스와 로컬 버퍼(local buffer) 간의 데이터 전송을 시작합니다.
4. 인터럽트 발생:  
   데이터 전송이 완료되면 디바이스 컨트롤러가 인터럽트를 발생시킵니다.
5. 제어권 전환:  
   디바이스 드라이버가 제어권을 운영 체제(OS)의 인터럽트 서비스 루틴으로 넘겨줍니다.

**device driver**: 운영 체제의 일부로, 특정 하드웨어 디바이스와 통신하기 위해 필요한 소프트웨어  
**register**: 디바이스의 상태나 제어 정보가 저장되는 메모리 공간
**device controller**: 특정 하드웨어 디바이스를 제어하는 하드웨어 장치  
**local buffer**: 메모리의 일부에 위치하며, 디바이스 컨트롤러와 CPU 간의 데이터 전송을 위해 사용되는 임시 저장 공간

#### 첨부: DMA

DMA(Direct Memory Access)는 디바이스 컨트롤러가 메모리에 있는 로컬 버퍼로 데이터를 전송할 때 CPU의 개입 없이 진행할 수 있도록 해주는 기술입니다. 이를 통해 CPU가 다른 작업을 수행하는 동안 데이터 전송을 진행하여 자원을 효율적으로 활용할 수 있습니다.

### 인터럽트 서비스 루틴(Interrupt Service Routine, ISR)

운영 체제는 인터럽트 중심의 방식(**Interrupt-driven way**)으로 동작합니다. 인터럽트가 자주 발생하기 때문에 이를 신속하게 처리할 필요가 있습니다.  
이를 위해 OS는 특정 인터럽트를 어떻게 처리할지를 정의한 **인터럽트 서비스 루틴**(ISR)을 통해 인터럽트를 관리합니다. ISR은 다음과 같은 작업을 수행합니다:

- 인터럽트의 원인을 파악하고 처리합니다.
- 필요한 경우 추가적인 작업을 수행합니다.
- 완료 후 CPU의 상태를 복원하고, 이전 작업으로 돌아갑니다.

### 인터럽트 매커니즘

1. 인터럽트 요청: 디바이스가 인터럽트 요청 선(**Interrupt Request Line**)을 통해 CPU에 신호를 보냅니다.
2. 인터럽트 감지: CPU는 인터럽트를 감지하고, 해당 인터럽트를 처리할 인터럽트 핸들러(**Interrupt Handler**)로 전달합니다.
3. 요청 처리: 핸들러는 해당 디바이스의 요청을 처리한 후, 인터럽트를 클리어하여 CPU가 다시 본래의 작업으로 돌아갈 수 있도록 합니다.

대부분의 컴퓨터 시스템은 인터럽트 요청을 관리하기 위해 인터럽트 컨트롤러 하드웨어를 포함하고 있습니다.  
이 하드웨어는 여러 디바이스로부터의 인터럽트를 수집하고, CPU에게 우선순위에 따라 전달합니다. 이를 통해 CPU는 동시에 발생할 수 있는 여러 인터럽트를 효율적으로 처리할 수 있습니다.
